package mortb

import (
	"testing"

	. "github.com/smartystreets/goconvey/convey"
)

func TestMOrtbResponse_FromJson(t *testing.T) {
	Convey("FromJson", t, func() {
		jsonBidResponse := &MOrtbResponse{}
		data := `{
					"id": "8e8ae0b4-18a0-45d6-9337-a54cbb554592",
					"seatbid": [
						{
							"bid": [
								{
									"id": "5cff1e2aca7ebd2979582496",
									"impid": "1",
									"price": 0.49951281248644114,
									"adm": "{\"native\":{\"link\":{\"url\":\"https://sg01.rayjump.com/click?k=5cff1e2aca7ebd2979582496&p=NjAyOHwyODAwMHwwfDkwM3wyODY4NTE2MzV8MjcyNjk5MTIyNXxub3JtYWx8bW9wdWJ8MTIwMHg2Mjd8OHxhbmRyb2lkfDguMC4wfHxzbS1qNzIwZnx8fFZOfHwyfHxub3JtYWx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcnxkMjc0YzRlZjNlN2Q0MjU4OTMyZjc5MDA0YTE4MzIzOXw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8fHx8fHw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8MTQuMTgzLjE3NS40N3x8fHx8fDB8MHxkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmN8fHxzYW1zdW5nfHx8cmFua19tb2RlbF9jYW1wfHwxfHx8LHRmaSxoaXQsVGwscGEsQ0IsTFMsSTEscWMsRDB8eyJjYXJyaWVyIjoiNDUyMDEiLCJjaXR5IjoiaGFub2kiLCJjdHlwZSI6IjEiLCJkZUNsayI6IjAiLCJkZUltcCI6IjAiLCJwYXJzZSI6IjAiLCJyZXF0eXBlIjoibiIsInRyYWZmaWNfdHlwZSI6ImFwcCIsInZibnIiOiIiLCJ2cmJuciI6IiIsInZ0YSI6IjEifXwxNTYwMjIzMjc0fHwyMWIyYmY2MGE5ZTM0YmIzYWQzZDMzOTQwZjg0Yjc1ZHw1NDM3ZjRmYzhkYzc0YWZmYTM4YjM0Zjk4MTM2ODQ4NHx8fHx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3Rlcnx8fHx8fDEzMTc2MzI0MzYyMTE2Mnx8fHx8fHx8fHwwfHx8fHx8fHx8WzAuMjUsMC4yNSwxLDFdfHx8fHx8fHx8fHx8fHx8fHx8&r=eyJnaWQiOiIiLCJ0cGlkIjoxMDMsImNyYXQiOjMsImFkdl9jcmlkIjoxMTk4NTIzMiwiaWNjIjoxLCJnbGlzdCI6IjEwNiwyNzI2OTkxMjI1LDExOTg1MjMyLDEyMDB4NjI3fDQwNCwyNzI2OTkxMTQzLDB8NDA1LDI3MjY5OTExNDYsMHw0MDEsMjcyNjk5MTEzNywwfDQwMiwyNzI2OTkxMTM4LDB8NDAzLDI3MjY5OTExNDAsMCIsImNyX25hbWUiOiIwNTA4NTAuanBnIn0=\"},\"imptrackers\": [\"https://dsp.mobvista.com/smaato_imp?price=${AUCTION_PRICE}&region=us&reqid=5cff1e2aca7ebd2979582496&campaignid=286851635&exchange=mopub&restype=native&ctype=cpi&devid=d37560c4-0071-49a8-afb9-38ac75be1f6c&day=20190611&reqinfo=CS0JY3BpCW1vcHViCTE1NjAyMjMyNzQzMjgJL21vcHViX3JlcXVlc3QJLQk1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTYJMC40OTk1MTI4MTI1CTAuMDAwMDAwMDAwMAktCW5vcm1hbAlyYW5rX21vZGVsX2NhbXAJeyJTZWN1cmUiOiIxIiwiYWIiOiJxYyIsImF0IjoiMiIsImJjYXQiOiJbXCJJQUIyNVwiLFwiSUFCMjZcIixcIklBQjctMzlcIixcIklBQjgtMThcIixcIklBQjEzLTRcIixcIklBQjEzLTlcIixcIklBQjMtN1wiLFwiSUFCNy01XCIsXCJJQUIyNi0zXCIsXCJJQUIyNi0xXCIsXCJJQUIyNi00XCIsXCJJQUIxMy0yXCIsXCJJQUIxMy02XCIsXCJJQUIxMy03XCIsXCJJQUIxMS00XCIsXCJJQUI5LTlcIixcIklBQjgtNVwiLFwiSUFCMTMtOFwiLFwiSUFCMTMtMTFcIixcIklBQjktN1wiLFwiSUFCMjUtN1wiLFwiSUFCMjUtNVwiLFwiSUFCMjUtMlwiLFwiSUFCMTMtMVwiLFwiSUFCMTMtNVwiLFwiSUFCMTMtMTBcIixcIklBQjI1LTNcIl0iLCJiZGZjdCI6IjEuOCIsImNfYWIiOiJBIiwiY2FpZCI6IjI3MjY5OTEyMjUiLCJjYXMiOiIxMjAweDYyNyIsImNpdnIiOiIwLjAwMDAwMDAiLCJjcF9ydCI6IjEiLCJjcmVhdGl2ZSI6ImY2MDcyNjdlMjkwMDUxM2UyM2I4ODZlYjE3NmZiZWNjIzEjMjcyNjk5MTIyNSwxMTk4NTIzMiwxMDYsNTk4YWY2ZmYyYTIxMjBiOTdjMDNmZjcyNWVkNzMwYWYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNTEwMDAsMCwwLDAsMTU1NzM3MzQzNCwxNTU3MzczNDM0LFZOfDI3MjY5OTExNDMsMCw0MDQsZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2UsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDYsMCw0MDUsMWQ1OGY5M2I3YmRkZjgxNWZhNzhmY2ZhYjVjNzFhZTMsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1Nzk2NjE4NiwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzcsMCw0MDEsNTM2MDAzNzUzY2NiOWI0N2E0ZGRjYTc1MmFiNWFkMTYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzgsMCw0MDIsZmViZTUyOWVjNGI2MWY1ODUzMGFhYTdhNDFhMmEyODUsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDAsMCw0MDMsYzMzYWI0MGYxNDcyZWYxNjQ5Mjg3OWY5YTdiYmYxNzAsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOIzEwMyIsImNyb3NzIjoiMCIsImN0ciI6IjAuMDAwMDAwMCIsImRoIjoiMTI4MCIsImRpdnIiOiIwLjAwMDAwMDAiLCJkbSI6Im1vcHViIiwiZG1wcXVlcnkiOiIxIiwiZG12IjoiNS4yLjAiLCJkdyI6IjcyMCIsImh3diI6IiIsImltcHJlc3Npb25fdXJsX21vZGUiOiIxIiwiaXAiOiI0Ny4yNTIuNS4yNDIiLCJpdnIiOiIxLjExMDAyODUiLCJsZyI6InZpIiwibWlkIjoiMTMxNzYzMjQzNjIxMTYyIiwibXMiOiJmYWxzZSIsInJhbmdlIjoiMCIsInJhbmsiOiIxIiwicmFua3YyIjoiMSIsInJlY2VpdmVkIjoiMXwwLjI1IiwicnZyIjoiMS4xMTAwMjg1Iiwic2VhcmNoIjoiMSIsInNwZWNzIjoiIiwic3JjIjoiNTQwIiwidGVtcGxhdGUiOiIxMDMiLCJ2ZXJudW0iOiI2MTEwNCIsInZlcnNpb24iOiJ2NS45LjEwLiIsInZtcyI6ImZhbHNlIn0JMwlkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmMsZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjLCwsLCwsLCwsLAkyCThlOGFlMGI0LTE4YTAtNDVkNi05MzM3LWE1NGNiYjU1NDU5MgkxCTU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0CWNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcglTcGFjZV9BCWQyNzRjNGVmM2U3ZDQyNTg5MzJmNzkwMDRhMTgzMjM5CUlBQjMmdXRpbGl0aWVzCTAJMTIwMHg2MjcJMTQuMTgzLjE3NS40NwlzYW1zdW5nCXNtLWo3MjBmCWFuZHJvaWQJOC4wLjAJMAkyCVZOCWQzNzU2MGM0LTAwNzEtNDlhOC1hZmI5LTM4YWM3NWJlMWY2YwktCS0JZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjCS0JMAktCU1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjAuMDsgU00tSjcyMEYgQnVpbGQvUjE2Tlc7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNzUuMC4zNzcwLjY3IE1vYmlsZSBTYWZhcmkvNTM3LjM2CTIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkCSx0ZmksaGl0LFRsLHBhLENCLExTLEkxLHFjLEQwCTAuMTkwMDAwMDAwMAl7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9CTI4Njg1MTYzNQkwLjI1MDAwMDAwMDAJTm9ub2xpdmUgLSBMaXZlIHN0cmVhbSBHYW1lICYgR+G7jWkgVmlkZW8JY29tLm5vbm8uYW5kcm9pZAk5MDMJMjcyNjk5MTIyNQ==\",\"https://sg01.rayjump.com/impression?k=5cff1e2aca7ebd2979582496&p=NjAyOHwyODAwMHwwfDkwM3wyODY4NTE2MzV8MjcyNjk5MTIyNXxub3JtYWx8bW9wdWJ8MTIwMHg2Mjd8OHxhbmRyb2lkfDguMC4wfHxzbS1qNzIwZnx8fFZOfHwyfHxub3JtYWx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcnxkMjc0YzRlZjNlN2Q0MjU4OTMyZjc5MDA0YTE4MzIzOXw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8fHx8fHw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8MTQuMTgzLjE3NS40N3x8fHx8fDB8MHxkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmN8fHxzYW1zdW5nfHx8cmFua19tb2RlbF9jYW1wfHwxfHwyODAwMHwsdGZpLGhpdCxUbCxwYSxDQixMUyxJMSxxYyxEMHx7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9fDE1NjAyMjMyNzR8fDIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkfDU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0fHx8fHx8Y29tLm9uZWFwcC5tYXguY2xlYW5lci5ib29zdGVyfHx8fHx8MTMxNzYzMjQzNjIxMTYyfHx8fHx8fHx8fDB8fHx8fHx8fHxbMC4yNSwwLjI1LDEsMV18fHx8fHx8fHx8fHx8fHx8fHw=&x=0&r=eyJnaWQiOiIiLCJ0cGlkIjoxMDMsImNyYXQiOjMsImFkdl9jcmlkIjoxMTk4NTIzMiwiaWNjIjoxLCJnbGlzdCI6IjEwNiwyNzI2OTkxMjI1LDExOTg1MjMyLDEyMDB4NjI3fDQwNCwyNzI2OTkxMTQzLDB8NDA1LDI3MjY5OTExNDYsMHw0MDEsMjcyNjk5MTEzNywwfDQwMiwyNzI2OTkxMTM4LDB8NDAzLDI3MjY5OTExNDAsMCIsImNyX25hbWUiOiIwNTA4NTAuanBnIn0=\",\"https://smart.mobvista.com/win?price=${AUCTION_PRICE}&adx=mopub&reqinfo=CS0JY3BpCW1vcHViCTE1NjAyMjMyNzQzMjgJL21vcHViX3JlcXVlc3QJLQk1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTYJMC40OTk1MTI4MTI1CTAuMDAwMDAwMDAwMAktCW5vcm1hbAlyYW5rX21vZGVsX2NhbXAJeyJTZWN1cmUiOiIxIiwiYWIiOiJxYyIsImF0IjoiMiIsImJjYXQiOiJbXCJJQUIyNVwiLFwiSUFCMjZcIixcIklBQjctMzlcIixcIklBQjgtMThcIixcIklBQjEzLTRcIixcIklBQjEzLTlcIixcIklBQjMtN1wiLFwiSUFCNy01XCIsXCJJQUIyNi0zXCIsXCJJQUIyNi0xXCIsXCJJQUIyNi00XCIsXCJJQUIxMy0yXCIsXCJJQUIxMy02XCIsXCJJQUIxMy03XCIsXCJJQUIxMS00XCIsXCJJQUI5LTlcIixcIklBQjgtNVwiLFwiSUFCMTMtOFwiLFwiSUFCMTMtMTFcIixcIklBQjktN1wiLFwiSUFCMjUtN1wiLFwiSUFCMjUtNVwiLFwiSUFCMjUtMlwiLFwiSUFCMTMtMVwiLFwiSUFCMTMtNVwiLFwiSUFCMTMtMTBcIixcIklBQjI1LTNcIl0iLCJiZGZjdCI6IjEuOCIsImNfYWIiOiJBIiwiY2FpZCI6IjI3MjY5OTEyMjUiLCJjYXMiOiIxMjAweDYyNyIsImNpdnIiOiIwLjAwMDAwMDAiLCJjcF9ydCI6IjEiLCJjcmVhdGl2ZSI6ImY2MDcyNjdlMjkwMDUxM2UyM2I4ODZlYjE3NmZiZWNjIzEjMjcyNjk5MTIyNSwxMTk4NTIzMiwxMDYsNTk4YWY2ZmYyYTIxMjBiOTdjMDNmZjcyNWVkNzMwYWYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNTEwMDAsMCwwLDAsMTU1NzM3MzQzNCwxNTU3MzczNDM0LFZOfDI3MjY5OTExNDMsMCw0MDQsZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2UsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDYsMCw0MDUsMWQ1OGY5M2I3YmRkZjgxNWZhNzhmY2ZhYjVjNzFhZTMsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1Nzk2NjE4NiwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzcsMCw0MDEsNTM2MDAzNzUzY2NiOWI0N2E0ZGRjYTc1MmFiNWFkMTYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzgsMCw0MDIsZmViZTUyOWVjNGI2MWY1ODUzMGFhYTdhNDFhMmEyODUsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDAsMCw0MDMsYzMzYWI0MGYxNDcyZWYxNjQ5Mjg3OWY5YTdiYmYxNzAsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOIzEwMyIsImNyb3NzIjoiMCIsImN0ciI6IjAuMDAwMDAwMCIsImRoIjoiMTI4MCIsImRpdnIiOiIwLjAwMDAwMDAiLCJkbSI6Im1vcHViIiwiZG1wcXVlcnkiOiIxIiwiZG12IjoiNS4yLjAiLCJkdyI6IjcyMCIsImh3diI6IiIsImltcHJlc3Npb25fdXJsX21vZGUiOiIxIiwiaXAiOiI0Ny4yNTIuNS4yNDIiLCJpdnIiOiIxLjExMDAyODUiLCJsZyI6InZpIiwibWlkIjoiMTMxNzYzMjQzNjIxMTYyIiwibXMiOiJmYWxzZSIsInJhbmdlIjoiMCIsInJhbmsiOiIxIiwicmFua3YyIjoiMSIsInJlY2VpdmVkIjoiMXwwLjI1IiwicnZyIjoiMS4xMTAwMjg1Iiwic2VhcmNoIjoiMSIsInNwZWNzIjoiIiwic3JjIjoiNTQwIiwidGVtcGxhdGUiOiIxMDMiLCJ2ZXJudW0iOiI2MTEwNCIsInZlcnNpb24iOiJ2NS45LjEwLiIsInZtcyI6ImZhbHNlIn0JMwlkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmMsZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjLCwsLCwsLCwsLAkyCThlOGFlMGI0LTE4YTAtNDVkNi05MzM3LWE1NGNiYjU1NDU5MgkxCTU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0CWNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcglTcGFjZV9BCWQyNzRjNGVmM2U3ZDQyNTg5MzJmNzkwMDRhMTgzMjM5CUlBQjMmdXRpbGl0aWVzCTAJMTIwMHg2MjcJMTQuMTgzLjE3NS40NwlzYW1zdW5nCXNtLWo3MjBmCWFuZHJvaWQJOC4wLjAJMAkyCVZOCWQzNzU2MGM0LTAwNzEtNDlhOC1hZmI5LTM4YWM3NWJlMWY2YwktCS0JZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjCS0JMAktCU1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjAuMDsgU00tSjcyMEYgQnVpbGQvUjE2Tlc7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNzUuMC4zNzcwLjY3IE1vYmlsZSBTYWZhcmkvNTM3LjM2CTIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkCSx0ZmksaGl0LFRsLHBhLENCLExTLEkxLHFjLEQwCTAuMTkwMDAwMDAwMAl7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9CTI4Njg1MTYzNQkwLjI1MDAwMDAwMDAJTm9ub2xpdmUgLSBMaXZlIHN0cmVhbSBHYW1lICYgR+G7jWkgVmlkZW8JY29tLm5vbm8uYW5kcm9pZAk5MDMJMjcyNjk5MTIyNQ==\"],\"assets\":[{\"id\":5,\"required\":0,\"type\":\"ctatext\",\"data\": {\"value\": \"cài đặt, dựng lên\"}},{\"id\":3,\"required\":1,\"type\":\"icon\",\"img\": {\"url\": \"https://assets.dspunion.com/cdn-adn/v2/dmp/19/05/16/08/14/5cdcab791a11f.png\",\"w\":128,\"h\":128}},{\"id\":2,\"required\":1,\"type\":\"main\",\"img\": {\"url\": \"https://assets.dspunion.com/cdn-adn/v2/offersync/19/05/09/11/43/5cd3a1ec57d70.jpg\",\"w\":1200,\"h\":627}},{\"id\":4,\"required\":1,\"type\":\"desc\",\"data\": {\"value\": \"Cùng xem game phát sóng trực tuyến và tương tác với các host xinh đẹp toàn cầu.\"}},{\"id\":1,\"required\":1,\"type\":\"title\",\"title\": {\"text\": \"Nonolive - Phát sóng trực tiếp\"}}]}}",
									"iurl": "https://assets.dspunion.com/cdn-adn/v2/offersync/19/05/09/11/43/5cd3a1ec57d70.jpg",
									"cid": "286851635",
									"adid": "5cff1e2aca7ebd2979582496",
									"crid": "2726991225",
									"cat": [
										"IAB1"
									],
									"adomain": [
										"Nonolive-LivestreamGame&GọiVideo.com"
									],
									"ext": {
										"crtype": "native"
									}
								}
							],
							"seat": ""
						}
					],
					"cur": "USD"
				}`
		jsonBidResponse.FromJson([]byte(data))
		So(jsonBidResponse.SeatBid[0].Bid[0].Price, ShouldEqual, 0.49951281248644114)
		So(jsonBidResponse.SeatBid[0].Bid[0].AdvDomain[0], ShouldEqual, "Nonolive-LivestreamGame&GọiVideo.com")
		admNative := new(AdmNative)
		admNative, err := admNative.ToAdmNative(jsonBidResponse.SeatBid[0].Bid[0].AdMarkup)
		So(err, ShouldBeNil)
		So(admNative.Native.Link.URL, ShouldEqual, "https://sg01.rayjump.com/click?k=5cff1e2aca7ebd2979582496&p=NjAyOHwyODAwMHwwfDkwM3wyODY4NTE2MzV8MjcyNjk5MTIyNXxub3JtYWx8bW9wdWJ8MTIwMHg2Mjd8OHxhbmRyb2lkfDguMC4wfHxzbS1qNzIwZnx8fFZOfHwyfHxub3JtYWx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcnxkMjc0YzRlZjNlN2Q0MjU4OTMyZjc5MDA0YTE4MzIzOXw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8fHx8fHw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8MTQuMTgzLjE3NS40N3x8fHx8fDB8MHxkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmN8fHxzYW1zdW5nfHx8cmFua19tb2RlbF9jYW1wfHwxfHx8LHRmaSxoaXQsVGwscGEsQ0IsTFMsSTEscWMsRDB8eyJjYXJyaWVyIjoiNDUyMDEiLCJjaXR5IjoiaGFub2kiLCJjdHlwZSI6IjEiLCJkZUNsayI6IjAiLCJkZUltcCI6IjAiLCJwYXJzZSI6IjAiLCJyZXF0eXBlIjoibiIsInRyYWZmaWNfdHlwZSI6ImFwcCIsInZibnIiOiIiLCJ2cmJuciI6IiIsInZ0YSI6IjEifXwxNTYwMjIzMjc0fHwyMWIyYmY2MGE5ZTM0YmIzYWQzZDMzOTQwZjg0Yjc1ZHw1NDM3ZjRmYzhkYzc0YWZmYTM4YjM0Zjk4MTM2ODQ4NHx8fHx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3Rlcnx8fHx8fDEzMTc2MzI0MzYyMTE2Mnx8fHx8fHx8fHwwfHx8fHx8fHx8WzAuMjUsMC4yNSwxLDFdfHx8fHx8fHx8fHx8fHx8fHx8&r=eyJnaWQiOiIiLCJ0cGlkIjoxMDMsImNyYXQiOjMsImFkdl9jcmlkIjoxMTk4NTIzMiwiaWNjIjoxLCJnbGlzdCI6IjEwNiwyNzI2OTkxMjI1LDExOTg1MjMyLDEyMDB4NjI3fDQwNCwyNzI2OTkxMTQzLDB8NDA1LDI3MjY5OTExNDYsMHw0MDEsMjcyNjk5MTEzNywwfDQwMiwyNzI2OTkxMTM4LDB8NDAzLDI3MjY5OTExNDAsMCIsImNyX25hbWUiOiIwNTA4NTAuanBnIn0=")
		So(len(admNative.Native.Assets), ShouldBeGreaterThan, 0)
	})

}

func TestMOrtbResponse_String(t *testing.T) {
	Convey("String", t, func() {
		jsonBidResponse := &MOrtbResponse{}
		_ = `{"app":{"bundle":"com.oneapp.max.cleaner.booster","cat":["IAB3","utilities"],"id":"d274c4ef3e7d4258932f79004a183239","name":"Space_A","publisher":{"id":"5437f4fc8dc74affa38b34f981368484","name":"iHandy Network Limited"},"storeurl":"https://play.google.com/store/apps/details?id=com.oneapp.max.cleaner.booster","ver":"1.5.4"},"at":2,"bcat":["IAB25","IAB26","IAB7-39","IAB8-18","IAB8-5","IAB9-9"],"device":{"carrier":"452-01","connectiontype":2,"dnt":0,"geo":{"country":"VNM"},"h":1280,"ifa":"d37560c4-0071-49a8-afb9-38ac75be1f6c","ip":"14.183.175.47","js":1,"language":"vi","make":"samsung","model":"SM-J720F","os":"Android","osv":"8.0.0","pxratio":1.750,"ua":"Mozilla/5.0 (Linux; Android 8.0.0; SM-J720F Build/R16NW; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3770.67 Mobile Safari/537.36","w":720},"ext":{"pchain":"74b46c0ea83967ca:5437f4fc8dc74affa38b34f981368484"},"id":"8e8ae0b4-18a0-45d6-9337-a54cbb554592","imp":[{"bidfloor":0.190,"displaymanager":"mopub","displaymanagerver":"5.2.0","ext":{"brsrclk":1,"dlp":1},"id":"1","instl":0,"native":{"battr":[3,8,9,10,14,6,7],"request":"{\"native\":{\"assets\":[{\"data\":{\"len\":15,\"type\":12},\"id\":5,\"required\":0},{\"id\":3,\"img\":{\"hmin\":80,\"type\":1,\"wmin\":80},\"required\":1},{\"id\":2,\"img\":{\"h\":627,\"hmin\":417,\"type\":3,\"w\":1200,\"wmin\":800},\"required\":1},{\"data\":{\"len\":150,\"type\":2},\"id\":4,\"required\":1},{\"id\":1,\"required\":1,\"title\":{\"len\":50}}],\"layout\":6,\"privacy\":1}}","ver":"1.0.0.2"},"secure":1,"tagid":"21b2bf60a9e34bb3ad3d33940f84b75d"}],"regs":{"ext":{"gdpr":0}},"tmax":410}`
		data := `{
					"id": "8e8ae0b4-18a0-45d6-9337-a54cbb554592",
					"seatbid": [
						{
							"bid": [
								{
									"id": "5cff1e2aca7ebd2979582496",
									"impid": "1",
									"price": 0.49951281248644114,
									"adm": "{\"native\":{\"link\":{\"url\":\"https://sg01.rayjump.com/click?k=5cff1e2aca7ebd2979582496&p=NjAyOHwyODAwMHwwfDkwM3wyODY4NTE2MzV8MjcyNjk5MTIyNXxub3JtYWx8bW9wdWJ8MTIwMHg2Mjd8OHxhbmRyb2lkfDguMC4wfHxzbS1qNzIwZnx8fFZOfHwyfHxub3JtYWx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcnxkMjc0YzRlZjNlN2Q0MjU4OTMyZjc5MDA0YTE4MzIzOXw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8fHx8fHw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8MTQuMTgzLjE3NS40N3x8fHx8fDB8MHxkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmN8fHxzYW1zdW5nfHx8cmFua19tb2RlbF9jYW1wfHwxfHx8LHRmaSxoaXQsVGwscGEsQ0IsTFMsSTEscWMsRDB8eyJjYXJyaWVyIjoiNDUyMDEiLCJjaXR5IjoiaGFub2kiLCJjdHlwZSI6IjEiLCJkZUNsayI6IjAiLCJkZUltcCI6IjAiLCJwYXJzZSI6IjAiLCJyZXF0eXBlIjoibiIsInRyYWZmaWNfdHlwZSI6ImFwcCIsInZibnIiOiIiLCJ2cmJuciI6IiIsInZ0YSI6IjEifXwxNTYwMjIzMjc0fHwyMWIyYmY2MGE5ZTM0YmIzYWQzZDMzOTQwZjg0Yjc1ZHw1NDM3ZjRmYzhkYzc0YWZmYTM4YjM0Zjk4MTM2ODQ4NHx8fHx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3Rlcnx8fHx8fDEzMTc2MzI0MzYyMTE2Mnx8fHx8fHx8fHwwfHx8fHx8fHx8WzAuMjUsMC4yNSwxLDFdfHx8fHx8fHx8fHx8fHx8fHx8&r=eyJnaWQiOiIiLCJ0cGlkIjoxMDMsImNyYXQiOjMsImFkdl9jcmlkIjoxMTk4NTIzMiwiaWNjIjoxLCJnbGlzdCI6IjEwNiwyNzI2OTkxMjI1LDExOTg1MjMyLDEyMDB4NjI3fDQwNCwyNzI2OTkxMTQzLDB8NDA1LDI3MjY5OTExNDYsMHw0MDEsMjcyNjk5MTEzNywwfDQwMiwyNzI2OTkxMTM4LDB8NDAzLDI3MjY5OTExNDAsMCIsImNyX25hbWUiOiIwNTA4NTAuanBnIn0=\"},\"imptrackers\": [\"https://dsp.mobvista.com/smaato_imp?price=${AUCTION_PRICE}&region=us&reqid=5cff1e2aca7ebd2979582496&campaignid=286851635&exchange=mopub&restype=native&ctype=cpi&devid=d37560c4-0071-49a8-afb9-38ac75be1f6c&day=20190611&reqinfo=CS0JY3BpCW1vcHViCTE1NjAyMjMyNzQzMjgJL21vcHViX3JlcXVlc3QJLQk1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTYJMC40OTk1MTI4MTI1CTAuMDAwMDAwMDAwMAktCW5vcm1hbAlyYW5rX21vZGVsX2NhbXAJeyJTZWN1cmUiOiIxIiwiYWIiOiJxYyIsImF0IjoiMiIsImJjYXQiOiJbXCJJQUIyNVwiLFwiSUFCMjZcIixcIklBQjctMzlcIixcIklBQjgtMThcIixcIklBQjEzLTRcIixcIklBQjEzLTlcIixcIklBQjMtN1wiLFwiSUFCNy01XCIsXCJJQUIyNi0zXCIsXCJJQUIyNi0xXCIsXCJJQUIyNi00XCIsXCJJQUIxMy0yXCIsXCJJQUIxMy02XCIsXCJJQUIxMy03XCIsXCJJQUIxMS00XCIsXCJJQUI5LTlcIixcIklBQjgtNVwiLFwiSUFCMTMtOFwiLFwiSUFCMTMtMTFcIixcIklBQjktN1wiLFwiSUFCMjUtN1wiLFwiSUFCMjUtNVwiLFwiSUFCMjUtMlwiLFwiSUFCMTMtMVwiLFwiSUFCMTMtNVwiLFwiSUFCMTMtMTBcIixcIklBQjI1LTNcIl0iLCJiZGZjdCI6IjEuOCIsImNfYWIiOiJBIiwiY2FpZCI6IjI3MjY5OTEyMjUiLCJjYXMiOiIxMjAweDYyNyIsImNpdnIiOiIwLjAwMDAwMDAiLCJjcF9ydCI6IjEiLCJjcmVhdGl2ZSI6ImY2MDcyNjdlMjkwMDUxM2UyM2I4ODZlYjE3NmZiZWNjIzEjMjcyNjk5MTIyNSwxMTk4NTIzMiwxMDYsNTk4YWY2ZmYyYTIxMjBiOTdjMDNmZjcyNWVkNzMwYWYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNTEwMDAsMCwwLDAsMTU1NzM3MzQzNCwxNTU3MzczNDM0LFZOfDI3MjY5OTExNDMsMCw0MDQsZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2UsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDYsMCw0MDUsMWQ1OGY5M2I3YmRkZjgxNWZhNzhmY2ZhYjVjNzFhZTMsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1Nzk2NjE4NiwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzcsMCw0MDEsNTM2MDAzNzUzY2NiOWI0N2E0ZGRjYTc1MmFiNWFkMTYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzgsMCw0MDIsZmViZTUyOWVjNGI2MWY1ODUzMGFhYTdhNDFhMmEyODUsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDAsMCw0MDMsYzMzYWI0MGYxNDcyZWYxNjQ5Mjg3OWY5YTdiYmYxNzAsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOIzEwMyIsImNyb3NzIjoiMCIsImN0ciI6IjAuMDAwMDAwMCIsImRoIjoiMTI4MCIsImRpdnIiOiIwLjAwMDAwMDAiLCJkbSI6Im1vcHViIiwiZG1wcXVlcnkiOiIxIiwiZG12IjoiNS4yLjAiLCJkdyI6IjcyMCIsImh3diI6IiIsImltcHJlc3Npb25fdXJsX21vZGUiOiIxIiwiaXAiOiI0Ny4yNTIuNS4yNDIiLCJpdnIiOiIxLjExMDAyODUiLCJsZyI6InZpIiwibWlkIjoiMTMxNzYzMjQzNjIxMTYyIiwibXMiOiJmYWxzZSIsInJhbmdlIjoiMCIsInJhbmsiOiIxIiwicmFua3YyIjoiMSIsInJlY2VpdmVkIjoiMXwwLjI1IiwicnZyIjoiMS4xMTAwMjg1Iiwic2VhcmNoIjoiMSIsInNwZWNzIjoiIiwic3JjIjoiNTQwIiwidGVtcGxhdGUiOiIxMDMiLCJ2ZXJudW0iOiI2MTEwNCIsInZlcnNpb24iOiJ2NS45LjEwLiIsInZtcyI6ImZhbHNlIn0JMwlkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmMsZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjLCwsLCwsLCwsLAkyCThlOGFlMGI0LTE4YTAtNDVkNi05MzM3LWE1NGNiYjU1NDU5MgkxCTU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0CWNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcglTcGFjZV9BCWQyNzRjNGVmM2U3ZDQyNTg5MzJmNzkwMDRhMTgzMjM5CUlBQjMmdXRpbGl0aWVzCTAJMTIwMHg2MjcJMTQuMTgzLjE3NS40NwlzYW1zdW5nCXNtLWo3MjBmCWFuZHJvaWQJOC4wLjAJMAkyCVZOCWQzNzU2MGM0LTAwNzEtNDlhOC1hZmI5LTM4YWM3NWJlMWY2YwktCS0JZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjCS0JMAktCU1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjAuMDsgU00tSjcyMEYgQnVpbGQvUjE2Tlc7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNzUuMC4zNzcwLjY3IE1vYmlsZSBTYWZhcmkvNTM3LjM2CTIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkCSx0ZmksaGl0LFRsLHBhLENCLExTLEkxLHFjLEQwCTAuMTkwMDAwMDAwMAl7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9CTI4Njg1MTYzNQkwLjI1MDAwMDAwMDAJTm9ub2xpdmUgLSBMaXZlIHN0cmVhbSBHYW1lICYgR+G7jWkgVmlkZW8JY29tLm5vbm8uYW5kcm9pZAk5MDMJMjcyNjk5MTIyNQ==\",\"https://sg01.rayjump.com/impression?k=5cff1e2aca7ebd2979582496&p=NjAyOHwyODAwMHwwfDkwM3wyODY4NTE2MzV8MjcyNjk5MTIyNXxub3JtYWx8bW9wdWJ8MTIwMHg2Mjd8OHxhbmRyb2lkfDguMC4wfHxzbS1qNzIwZnx8fFZOfHwyfHxub3JtYWx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcnxkMjc0YzRlZjNlN2Q0MjU4OTMyZjc5MDA0YTE4MzIzOXw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8fHx8fHw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8MTQuMTgzLjE3NS40N3x8fHx8fDB8MHxkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmN8fHxzYW1zdW5nfHx8cmFua19tb2RlbF9jYW1wfHwxfHwyODAwMHwsdGZpLGhpdCxUbCxwYSxDQixMUyxJMSxxYyxEMHx7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9fDE1NjAyMjMyNzR8fDIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkfDU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0fHx8fHx8Y29tLm9uZWFwcC5tYXguY2xlYW5lci5ib29zdGVyfHx8fHx8MTMxNzYzMjQzNjIxMTYyfHx8fHx8fHx8fDB8fHx8fHx8fHxbMC4yNSwwLjI1LDEsMV18fHx8fHx8fHx8fHx8fHx8fHw=&x=0&r=eyJnaWQiOiIiLCJ0cGlkIjoxMDMsImNyYXQiOjMsImFkdl9jcmlkIjoxMTk4NTIzMiwiaWNjIjoxLCJnbGlzdCI6IjEwNiwyNzI2OTkxMjI1LDExOTg1MjMyLDEyMDB4NjI3fDQwNCwyNzI2OTkxMTQzLDB8NDA1LDI3MjY5OTExNDYsMHw0MDEsMjcyNjk5MTEzNywwfDQwMiwyNzI2OTkxMTM4LDB8NDAzLDI3MjY5OTExNDAsMCIsImNyX25hbWUiOiIwNTA4NTAuanBnIn0=\",\"https://smart.mobvista.com/win?price=${AUCTION_PRICE}&adx=mopub&reqinfo=CS0JY3BpCW1vcHViCTE1NjAyMjMyNzQzMjgJL21vcHViX3JlcXVlc3QJLQk1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTYJMC40OTk1MTI4MTI1CTAuMDAwMDAwMDAwMAktCW5vcm1hbAlyYW5rX21vZGVsX2NhbXAJeyJTZWN1cmUiOiIxIiwiYWIiOiJxYyIsImF0IjoiMiIsImJjYXQiOiJbXCJJQUIyNVwiLFwiSUFCMjZcIixcIklBQjctMzlcIixcIklBQjgtMThcIixcIklBQjEzLTRcIixcIklBQjEzLTlcIixcIklBQjMtN1wiLFwiSUFCNy01XCIsXCJJQUIyNi0zXCIsXCJJQUIyNi0xXCIsXCJJQUIyNi00XCIsXCJJQUIxMy0yXCIsXCJJQUIxMy02XCIsXCJJQUIxMy03XCIsXCJJQUIxMS00XCIsXCJJQUI5LTlcIixcIklBQjgtNVwiLFwiSUFCMTMtOFwiLFwiSUFCMTMtMTFcIixcIklBQjktN1wiLFwiSUFCMjUtN1wiLFwiSUFCMjUtNVwiLFwiSUFCMjUtMlwiLFwiSUFCMTMtMVwiLFwiSUFCMTMtNVwiLFwiSUFCMTMtMTBcIixcIklBQjI1LTNcIl0iLCJiZGZjdCI6IjEuOCIsImNfYWIiOiJBIiwiY2FpZCI6IjI3MjY5OTEyMjUiLCJjYXMiOiIxMjAweDYyNyIsImNpdnIiOiIwLjAwMDAwMDAiLCJjcF9ydCI6IjEiLCJjcmVhdGl2ZSI6ImY2MDcyNjdlMjkwMDUxM2UyM2I4ODZlYjE3NmZiZWNjIzEjMjcyNjk5MTIyNSwxMTk4NTIzMiwxMDYsNTk4YWY2ZmYyYTIxMjBiOTdjMDNmZjcyNWVkNzMwYWYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNTEwMDAsMCwwLDAsMTU1NzM3MzQzNCwxNTU3MzczNDM0LFZOfDI3MjY5OTExNDMsMCw0MDQsZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2UsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDYsMCw0MDUsMWQ1OGY5M2I3YmRkZjgxNWZhNzhmY2ZhYjVjNzFhZTMsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1Nzk2NjE4NiwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzcsMCw0MDEsNTM2MDAzNzUzY2NiOWI0N2E0ZGRjYTc1MmFiNWFkMTYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzgsMCw0MDIsZmViZTUyOWVjNGI2MWY1ODUzMGFhYTdhNDFhMmEyODUsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDAsMCw0MDMsYzMzYWI0MGYxNDcyZWYxNjQ5Mjg3OWY5YTdiYmYxNzAsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOIzEwMyIsImNyb3NzIjoiMCIsImN0ciI6IjAuMDAwMDAwMCIsImRoIjoiMTI4MCIsImRpdnIiOiIwLjAwMDAwMDAiLCJkbSI6Im1vcHViIiwiZG1wcXVlcnkiOiIxIiwiZG12IjoiNS4yLjAiLCJkdyI6IjcyMCIsImh3diI6IiIsImltcHJlc3Npb25fdXJsX21vZGUiOiIxIiwiaXAiOiI0Ny4yNTIuNS4yNDIiLCJpdnIiOiIxLjExMDAyODUiLCJsZyI6InZpIiwibWlkIjoiMTMxNzYzMjQzNjIxMTYyIiwibXMiOiJmYWxzZSIsInJhbmdlIjoiMCIsInJhbmsiOiIxIiwicmFua3YyIjoiMSIsInJlY2VpdmVkIjoiMXwwLjI1IiwicnZyIjoiMS4xMTAwMjg1Iiwic2VhcmNoIjoiMSIsInNwZWNzIjoiIiwic3JjIjoiNTQwIiwidGVtcGxhdGUiOiIxMDMiLCJ2ZXJudW0iOiI2MTEwNCIsInZlcnNpb24iOiJ2NS45LjEwLiIsInZtcyI6ImZhbHNlIn0JMwlkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmMsZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjLCwsLCwsLCwsLAkyCThlOGFlMGI0LTE4YTAtNDVkNi05MzM3LWE1NGNiYjU1NDU5MgkxCTU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0CWNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcglTcGFjZV9BCWQyNzRjNGVmM2U3ZDQyNTg5MzJmNzkwMDRhMTgzMjM5CUlBQjMmdXRpbGl0aWVzCTAJMTIwMHg2MjcJMTQuMTgzLjE3NS40NwlzYW1zdW5nCXNtLWo3MjBmCWFuZHJvaWQJOC4wLjAJMAkyCVZOCWQzNzU2MGM0LTAwNzEtNDlhOC1hZmI5LTM4YWM3NWJlMWY2YwktCS0JZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjCS0JMAktCU1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjAuMDsgU00tSjcyMEYgQnVpbGQvUjE2Tlc7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNzUuMC4zNzcwLjY3IE1vYmlsZSBTYWZhcmkvNTM3LjM2CTIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkCSx0ZmksaGl0LFRsLHBhLENCLExTLEkxLHFjLEQwCTAuMTkwMDAwMDAwMAl7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9CTI4Njg1MTYzNQkwLjI1MDAwMDAwMDAJTm9ub2xpdmUgLSBMaXZlIHN0cmVhbSBHYW1lICYgR+G7jWkgVmlkZW8JY29tLm5vbm8uYW5kcm9pZAk5MDMJMjcyNjk5MTIyNQ==\"],\"assets\":[{\"id\":5,\"required\":0,\"type\":\"ctatext\",\"data\": {\"value\": \"cài đặt, dựng lên\"}},{\"id\":3,\"required\":1,\"type\":\"icon\",\"img\": {\"url\": \"https://assets.dspunion.com/cdn-adn/v2/dmp/19/05/16/08/14/5cdcab791a11f.png\",\"w\":128,\"h\":128}},{\"id\":2,\"required\":1,\"type\":\"main\",\"img\": {\"url\": \"https://assets.dspunion.com/cdn-adn/v2/offersync/19/05/09/11/43/5cd3a1ec57d70.jpg\",\"w\":1200,\"h\":627}},{\"id\":4,\"required\":1,\"type\":\"desc\",\"data\": {\"value\": \"Cùng xem game phát sóng trực tuyến và tương tác với các host xinh đẹp toàn cầu.\"}},{\"id\":1,\"required\":1,\"type\":\"title\",\"title\": {\"text\": \"Nonolive - Phát sóng trực tiếp\"}}]}}",
									"iurl": "https://assets.dspunion.com/cdn-adn/v2/offersync/19/05/09/11/43/5cd3a1ec57d70.jpg",
									"cid": "286851635",
									"adid": "5cff1e2aca7ebd2979582496",
									"crid": "2726991225",
									"cat": [
										"IAB1"
									],
									"adomain": [
										"Nonolive-LivestreamGame&GọiVideo.com"
									],
									"ext": {
										"crtype": "native"
									}
								}
							],
							"seat": ""
						}
					],
					"cur": "USD"
				}`
		err := jsonBidResponse.FromJson([]byte(data))
		if err != nil {
			t.Log(err)
		}
		json, err := jsonBidResponse.String()
		if err != nil {
			t.Log(err)
		}

		t.Log(json)
		So(json, ShouldContainSubstring, "Nonolive-LivestreamGame")
	})
}

func TestMOrtbResponse_ToUnescapeJson(t *testing.T) {
	Convey("ToUnescapeJson", t, func() {
		jsonBidResponse := &MOrtbResponse{}
		_ = `{"app":{"bundle":"com.oneapp.max.cleaner.booster","cat":["IAB3","utilities"],"id":"d274c4ef3e7d4258932f79004a183239","name":"Space_A","publisher":{"id":"5437f4fc8dc74affa38b34f981368484","name":"iHandy Network Limited"},"storeurl":"https://play.google.com/store/apps/details?id=com.oneapp.max.cleaner.booster","ver":"1.5.4"},"at":2,"bcat":["IAB25","IAB26","IAB7-39","IAB8-18","IAB8-5","IAB9-9"],"device":{"carrier":"452-01","connectiontype":2,"dnt":0,"geo":{"country":"VNM"},"h":1280,"ifa":"d37560c4-0071-49a8-afb9-38ac75be1f6c","ip":"14.183.175.47","js":1,"language":"vi","make":"samsung","model":"SM-J720F","os":"Android","osv":"8.0.0","pxratio":1.750,"ua":"Mozilla/5.0 (Linux; Android 8.0.0; SM-J720F Build/R16NW; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3770.67 Mobile Safari/537.36","w":720},"ext":{"pchain":"74b46c0ea83967ca:5437f4fc8dc74affa38b34f981368484"},"id":"8e8ae0b4-18a0-45d6-9337-a54cbb554592","imp":[{"bidfloor":0.190,"displaymanager":"mopub","displaymanagerver":"5.2.0","ext":{"brsrclk":1,"dlp":1},"id":"1","instl":0,"native":{"battr":[3,8,9,10,14,6,7],"request":"{\"native\":{\"assets\":[{\"data\":{\"len\":15,\"type\":12},\"id\":5,\"required\":0},{\"id\":3,\"img\":{\"hmin\":80,\"type\":1,\"wmin\":80},\"required\":1},{\"id\":2,\"img\":{\"h\":627,\"hmin\":417,\"type\":3,\"w\":1200,\"wmin\":800},\"required\":1},{\"data\":{\"len\":150,\"type\":2},\"id\":4,\"required\":1},{\"id\":1,\"required\":1,\"title\":{\"len\":50}}],\"layout\":6,\"privacy\":1}}","ver":"1.0.0.2"},"secure":1,"tagid":"21b2bf60a9e34bb3ad3d33940f84b75d"}],"regs":{"ext":{"gdpr":0}},"tmax":410}`
		data := `{
					"id": "8e8ae0b4-18a0-45d6-9337-a54cbb554592",
					"seatbid": [
						{
							"bid": [
								{
									"id": "5cff1e2aca7ebd2979582496",
									"impid": "1",
									"price": 0.49951281248644114,
									"adm": "{\"native\":{\"link\":{\"url\":\"https://sg01.rayjump.com/click?k=5cff1e2aca7ebd2979582496&p=NjAyOHwyODAwMHwwfDkwM3wyODY4NTE2MzV8MjcyNjk5MTIyNXxub3JtYWx8bW9wdWJ8MTIwMHg2Mjd8OHxhbmRyb2lkfDguMC4wfHxzbS1qNzIwZnx8fFZOfHwyfHxub3JtYWx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcnxkMjc0YzRlZjNlN2Q0MjU4OTMyZjc5MDA0YTE4MzIzOXw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8fHx8fHw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8MTQuMTgzLjE3NS40N3x8fHx8fDB8MHxkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmN8fHxzYW1zdW5nfHx8cmFua19tb2RlbF9jYW1wfHwxfHx8LHRmaSxoaXQsVGwscGEsQ0IsTFMsSTEscWMsRDB8eyJjYXJyaWVyIjoiNDUyMDEiLCJjaXR5IjoiaGFub2kiLCJjdHlwZSI6IjEiLCJkZUNsayI6IjAiLCJkZUltcCI6IjAiLCJwYXJzZSI6IjAiLCJyZXF0eXBlIjoibiIsInRyYWZmaWNfdHlwZSI6ImFwcCIsInZibnIiOiIiLCJ2cmJuciI6IiIsInZ0YSI6IjEifXwxNTYwMjIzMjc0fHwyMWIyYmY2MGE5ZTM0YmIzYWQzZDMzOTQwZjg0Yjc1ZHw1NDM3ZjRmYzhkYzc0YWZmYTM4YjM0Zjk4MTM2ODQ4NHx8fHx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3Rlcnx8fHx8fDEzMTc2MzI0MzYyMTE2Mnx8fHx8fHx8fHwwfHx8fHx8fHx8WzAuMjUsMC4yNSwxLDFdfHx8fHx8fHx8fHx8fHx8fHx8&r=eyJnaWQiOiIiLCJ0cGlkIjoxMDMsImNyYXQiOjMsImFkdl9jcmlkIjoxMTk4NTIzMiwiaWNjIjoxLCJnbGlzdCI6IjEwNiwyNzI2OTkxMjI1LDExOTg1MjMyLDEyMDB4NjI3fDQwNCwyNzI2OTkxMTQzLDB8NDA1LDI3MjY5OTExNDYsMHw0MDEsMjcyNjk5MTEzNywwfDQwMiwyNzI2OTkxMTM4LDB8NDAzLDI3MjY5OTExNDAsMCIsImNyX25hbWUiOiIwNTA4NTAuanBnIn0=\"},\"imptrackers\": [\"https://dsp.mobvista.com/smaato_imp?price=${AUCTION_PRICE}&region=us&reqid=5cff1e2aca7ebd2979582496&campaignid=286851635&exchange=mopub&restype=native&ctype=cpi&devid=d37560c4-0071-49a8-afb9-38ac75be1f6c&day=20190611&reqinfo=CS0JY3BpCW1vcHViCTE1NjAyMjMyNzQzMjgJL21vcHViX3JlcXVlc3QJLQk1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTYJMC40OTk1MTI4MTI1CTAuMDAwMDAwMDAwMAktCW5vcm1hbAlyYW5rX21vZGVsX2NhbXAJeyJTZWN1cmUiOiIxIiwiYWIiOiJxYyIsImF0IjoiMiIsImJjYXQiOiJbXCJJQUIyNVwiLFwiSUFCMjZcIixcIklBQjctMzlcIixcIklBQjgtMThcIixcIklBQjEzLTRcIixcIklBQjEzLTlcIixcIklBQjMtN1wiLFwiSUFCNy01XCIsXCJJQUIyNi0zXCIsXCJJQUIyNi0xXCIsXCJJQUIyNi00XCIsXCJJQUIxMy0yXCIsXCJJQUIxMy02XCIsXCJJQUIxMy03XCIsXCJJQUIxMS00XCIsXCJJQUI5LTlcIixcIklBQjgtNVwiLFwiSUFCMTMtOFwiLFwiSUFCMTMtMTFcIixcIklBQjktN1wiLFwiSUFCMjUtN1wiLFwiSUFCMjUtNVwiLFwiSUFCMjUtMlwiLFwiSUFCMTMtMVwiLFwiSUFCMTMtNVwiLFwiSUFCMTMtMTBcIixcIklBQjI1LTNcIl0iLCJiZGZjdCI6IjEuOCIsImNfYWIiOiJBIiwiY2FpZCI6IjI3MjY5OTEyMjUiLCJjYXMiOiIxMjAweDYyNyIsImNpdnIiOiIwLjAwMDAwMDAiLCJjcF9ydCI6IjEiLCJjcmVhdGl2ZSI6ImY2MDcyNjdlMjkwMDUxM2UyM2I4ODZlYjE3NmZiZWNjIzEjMjcyNjk5MTIyNSwxMTk4NTIzMiwxMDYsNTk4YWY2ZmYyYTIxMjBiOTdjMDNmZjcyNWVkNzMwYWYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNTEwMDAsMCwwLDAsMTU1NzM3MzQzNCwxNTU3MzczNDM0LFZOfDI3MjY5OTExNDMsMCw0MDQsZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2UsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDYsMCw0MDUsMWQ1OGY5M2I3YmRkZjgxNWZhNzhmY2ZhYjVjNzFhZTMsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1Nzk2NjE4NiwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzcsMCw0MDEsNTM2MDAzNzUzY2NiOWI0N2E0ZGRjYTc1MmFiNWFkMTYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzgsMCw0MDIsZmViZTUyOWVjNGI2MWY1ODUzMGFhYTdhNDFhMmEyODUsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDAsMCw0MDMsYzMzYWI0MGYxNDcyZWYxNjQ5Mjg3OWY5YTdiYmYxNzAsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOIzEwMyIsImNyb3NzIjoiMCIsImN0ciI6IjAuMDAwMDAwMCIsImRoIjoiMTI4MCIsImRpdnIiOiIwLjAwMDAwMDAiLCJkbSI6Im1vcHViIiwiZG1wcXVlcnkiOiIxIiwiZG12IjoiNS4yLjAiLCJkdyI6IjcyMCIsImh3diI6IiIsImltcHJlc3Npb25fdXJsX21vZGUiOiIxIiwiaXAiOiI0Ny4yNTIuNS4yNDIiLCJpdnIiOiIxLjExMDAyODUiLCJsZyI6InZpIiwibWlkIjoiMTMxNzYzMjQzNjIxMTYyIiwibXMiOiJmYWxzZSIsInJhbmdlIjoiMCIsInJhbmsiOiIxIiwicmFua3YyIjoiMSIsInJlY2VpdmVkIjoiMXwwLjI1IiwicnZyIjoiMS4xMTAwMjg1Iiwic2VhcmNoIjoiMSIsInNwZWNzIjoiIiwic3JjIjoiNTQwIiwidGVtcGxhdGUiOiIxMDMiLCJ2ZXJudW0iOiI2MTEwNCIsInZlcnNpb24iOiJ2NS45LjEwLiIsInZtcyI6ImZhbHNlIn0JMwlkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmMsZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjLCwsLCwsLCwsLAkyCThlOGFlMGI0LTE4YTAtNDVkNi05MzM3LWE1NGNiYjU1NDU5MgkxCTU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0CWNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcglTcGFjZV9BCWQyNzRjNGVmM2U3ZDQyNTg5MzJmNzkwMDRhMTgzMjM5CUlBQjMmdXRpbGl0aWVzCTAJMTIwMHg2MjcJMTQuMTgzLjE3NS40NwlzYW1zdW5nCXNtLWo3MjBmCWFuZHJvaWQJOC4wLjAJMAkyCVZOCWQzNzU2MGM0LTAwNzEtNDlhOC1hZmI5LTM4YWM3NWJlMWY2YwktCS0JZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjCS0JMAktCU1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjAuMDsgU00tSjcyMEYgQnVpbGQvUjE2Tlc7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNzUuMC4zNzcwLjY3IE1vYmlsZSBTYWZhcmkvNTM3LjM2CTIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkCSx0ZmksaGl0LFRsLHBhLENCLExTLEkxLHFjLEQwCTAuMTkwMDAwMDAwMAl7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9CTI4Njg1MTYzNQkwLjI1MDAwMDAwMDAJTm9ub2xpdmUgLSBMaXZlIHN0cmVhbSBHYW1lICYgR+G7jWkgVmlkZW8JY29tLm5vbm8uYW5kcm9pZAk5MDMJMjcyNjk5MTIyNQ==\",\"https://sg01.rayjump.com/impression?k=5cff1e2aca7ebd2979582496&p=NjAyOHwyODAwMHwwfDkwM3wyODY4NTE2MzV8MjcyNjk5MTIyNXxub3JtYWx8bW9wdWJ8MTIwMHg2Mjd8OHxhbmRyb2lkfDguMC4wfHxzbS1qNzIwZnx8fFZOfHwyfHxub3JtYWx8fGNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcnxkMjc0YzRlZjNlN2Q0MjU4OTMyZjc5MDA0YTE4MzIzOXw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8fHx8fHw1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTZ8MTQuMTgzLjE3NS40N3x8fHx8fDB8MHxkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmN8fHxzYW1zdW5nfHx8cmFua19tb2RlbF9jYW1wfHwxfHwyODAwMHwsdGZpLGhpdCxUbCxwYSxDQixMUyxJMSxxYyxEMHx7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9fDE1NjAyMjMyNzR8fDIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkfDU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0fHx8fHx8Y29tLm9uZWFwcC5tYXguY2xlYW5lci5ib29zdGVyfHx8fHx8MTMxNzYzMjQzNjIxMTYyfHx8fHx8fHx8fDB8fHx8fHx8fHxbMC4yNSwwLjI1LDEsMV18fHx8fHx8fHx8fHx8fHx8fHw=&x=0&r=eyJnaWQiOiIiLCJ0cGlkIjoxMDMsImNyYXQiOjMsImFkdl9jcmlkIjoxMTk4NTIzMiwiaWNjIjoxLCJnbGlzdCI6IjEwNiwyNzI2OTkxMjI1LDExOTg1MjMyLDEyMDB4NjI3fDQwNCwyNzI2OTkxMTQzLDB8NDA1LDI3MjY5OTExNDYsMHw0MDEsMjcyNjk5MTEzNywwfDQwMiwyNzI2OTkxMTM4LDB8NDAzLDI3MjY5OTExNDAsMCIsImNyX25hbWUiOiIwNTA4NTAuanBnIn0=\",\"https://smart.mobvista.com/win?price=${AUCTION_PRICE}&adx=mopub&reqinfo=CS0JY3BpCW1vcHViCTE1NjAyMjMyNzQzMjgJL21vcHViX3JlcXVlc3QJLQk1Y2ZmMWUyYWNhN2ViZDI5Nzk1ODI0OTYJMC40OTk1MTI4MTI1CTAuMDAwMDAwMDAwMAktCW5vcm1hbAlyYW5rX21vZGVsX2NhbXAJeyJTZWN1cmUiOiIxIiwiYWIiOiJxYyIsImF0IjoiMiIsImJjYXQiOiJbXCJJQUIyNVwiLFwiSUFCMjZcIixcIklBQjctMzlcIixcIklBQjgtMThcIixcIklBQjEzLTRcIixcIklBQjEzLTlcIixcIklBQjMtN1wiLFwiSUFCNy01XCIsXCJJQUIyNi0zXCIsXCJJQUIyNi0xXCIsXCJJQUIyNi00XCIsXCJJQUIxMy0yXCIsXCJJQUIxMy02XCIsXCJJQUIxMy03XCIsXCJJQUIxMS00XCIsXCJJQUI5LTlcIixcIklBQjgtNVwiLFwiSUFCMTMtOFwiLFwiSUFCMTMtMTFcIixcIklBQjktN1wiLFwiSUFCMjUtN1wiLFwiSUFCMjUtNVwiLFwiSUFCMjUtMlwiLFwiSUFCMTMtMVwiLFwiSUFCMTMtNVwiLFwiSUFCMTMtMTBcIixcIklBQjI1LTNcIl0iLCJiZGZjdCI6IjEuOCIsImNfYWIiOiJBIiwiY2FpZCI6IjI3MjY5OTEyMjUiLCJjYXMiOiIxMjAweDYyNyIsImNpdnIiOiIwLjAwMDAwMDAiLCJjcF9ydCI6IjEiLCJjcmVhdGl2ZSI6ImY2MDcyNjdlMjkwMDUxM2UyM2I4ODZlYjE3NmZiZWNjIzEjMjcyNjk5MTIyNSwxMTk4NTIzMiwxMDYsNTk4YWY2ZmYyYTIxMjBiOTdjMDNmZjcyNWVkNzMwYWYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNTEwMDAsMCwwLDAsMTU1NzM3MzQzNCwxNTU3MzczNDM0LFZOfDI3MjY5OTExNDMsMCw0MDQsZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2UsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDYsMCw0MDUsMWQ1OGY5M2I3YmRkZjgxNWZhNzhmY2ZhYjVjNzFhZTMsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1Nzk2NjE4NiwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzcsMCw0MDEsNTM2MDAzNzUzY2NiOWI0N2E0ZGRjYTc1MmFiNWFkMTYsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExMzgsMCw0MDIsZmViZTUyOWVjNGI2MWY1ODUzMGFhYTdhNDFhMmEyODUsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOfDI3MjY5OTExNDAsMCw0MDMsYzMzYWI0MGYxNDcyZWYxNjQ5Mjg3OWY5YTdiYmYxNzAsY29tLm5vbm8uYW5kcm9pZCwyLDAsNDEwMDAsMCwwLDAsMTU1NzM3MzM3OSwxNTU3MzczMzc5LFZOIzEwMyIsImNyb3NzIjoiMCIsImN0ciI6IjAuMDAwMDAwMCIsImRoIjoiMTI4MCIsImRpdnIiOiIwLjAwMDAwMDAiLCJkbSI6Im1vcHViIiwiZG1wcXVlcnkiOiIxIiwiZG12IjoiNS4yLjAiLCJkdyI6IjcyMCIsImh3diI6IiIsImltcHJlc3Npb25fdXJsX21vZGUiOiIxIiwiaXAiOiI0Ny4yNTIuNS4yNDIiLCJpdnIiOiIxLjExMDAyODUiLCJsZyI6InZpIiwibWlkIjoiMTMxNzYzMjQzNjIxMTYyIiwibXMiOiJmYWxzZSIsInJhbmdlIjoiMCIsInJhbmsiOiIxIiwicmFua3YyIjoiMSIsInJlY2VpdmVkIjoiMXwwLjI1IiwicnZyIjoiMS4xMTAwMjg1Iiwic2VhcmNoIjoiMSIsInNwZWNzIjoiIiwic3JjIjoiNTQwIiwidGVtcGxhdGUiOiIxMDMiLCJ2ZXJudW0iOiI2MTEwNCIsInZlcnNpb24iOiJ2NS45LjEwLiIsInZtcyI6ImZhbHNlIn0JMwlkMzc1NjBjNC0wMDcxLTQ5YTgtYWZiOS0zOGFjNzViZTFmNmMsZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjLCwsLCwsLCwsLAkyCThlOGFlMGI0LTE4YTAtNDVkNi05MzM3LWE1NGNiYjU1NDU5MgkxCTU0MzdmNGZjOGRjNzRhZmZhMzhiMzRmOTgxMzY4NDg0CWNvbS5vbmVhcHAubWF4LmNsZWFuZXIuYm9vc3RlcglTcGFjZV9BCWQyNzRjNGVmM2U3ZDQyNTg5MzJmNzkwMDRhMTgzMjM5CUlBQjMmdXRpbGl0aWVzCTAJMTIwMHg2MjcJMTQuMTgzLjE3NS40NwlzYW1zdW5nCXNtLWo3MjBmCWFuZHJvaWQJOC4wLjAJMAkyCVZOCWQzNzU2MGM0LTAwNzEtNDlhOC1hZmI5LTM4YWM3NWJlMWY2YwktCS0JZDM3NTYwYzQtMDA3MS00OWE4LWFmYjktMzhhYzc1YmUxZjZjCS0JMAktCU1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjAuMDsgU00tSjcyMEYgQnVpbGQvUjE2Tlc7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNzUuMC4zNzcwLjY3IE1vYmlsZSBTYWZhcmkvNTM3LjM2CTIxYjJiZjYwYTllMzRiYjNhZDNkMzM5NDBmODRiNzVkCSx0ZmksaGl0LFRsLHBhLENCLExTLEkxLHFjLEQwCTAuMTkwMDAwMDAwMAl7ImNhcnJpZXIiOiI0NTIwMSIsImNpdHkiOiJoYW5vaSIsImN0eXBlIjoiMSIsImRlQ2xrIjoiMCIsImRlSW1wIjoiMCIsInBhcnNlIjoiMCIsInJlcXR5cGUiOiJuIiwidHJhZmZpY190eXBlIjoiYXBwIiwidmJuciI6IiIsInZyYm5yIjoiIiwidnRhIjoiMSJ9CTI4Njg1MTYzNQkwLjI1MDAwMDAwMDAJTm9ub2xpdmUgLSBMaXZlIHN0cmVhbSBHYW1lICYgR+G7jWkgVmlkZW8JY29tLm5vbm8uYW5kcm9pZAk5MDMJMjcyNjk5MTIyNQ==\"],\"assets\":[{\"id\":5,\"required\":0,\"type\":\"ctatext\",\"data\": {\"value\": \"cài đặt, dựng lên\"}},{\"id\":3,\"required\":1,\"type\":\"icon\",\"img\": {\"url\": \"https://assets.dspunion.com/cdn-adn/v2/dmp/19/05/16/08/14/5cdcab791a11f.png\",\"w\":128,\"h\":128}},{\"id\":2,\"required\":1,\"type\":\"main\",\"img\": {\"url\": \"https://assets.dspunion.com/cdn-adn/v2/offersync/19/05/09/11/43/5cd3a1ec57d70.jpg\",\"w\":1200,\"h\":627}},{\"id\":4,\"required\":1,\"type\":\"desc\",\"data\": {\"value\": \"Cùng xem game phát sóng trực tuyến và tương tác với các host xinh đẹp toàn cầu.\"}},{\"id\":1,\"required\":1,\"type\":\"title\",\"title\": {\"text\": \"Nonolive - Phát sóng trực tiếp\"}}]}}",
									"iurl": "https://assets.dspunion.com/cdn-adn/v2/offersync/19/05/09/11/43/5cd3a1ec57d70.jpg",
									"cid": "286851635",
									"adid": "5cff1e2aca7ebd2979582496",
									"crid": "2726991225",
									"cat": [
										"IAB1"
									],
									"adomain": [
										"Nonolive-LivestreamGame&GọiVideo.com"
									],
									"ext": {
										"crtype": "native"
									}
								}
							],
							"seat": ""
						}
					],
					"cur": "USD"
				}`
		err := jsonBidResponse.FromJson([]byte(data))
		if err != nil {
			t.Log(err)
		}
		json, err := jsonBidResponse.ToUnescapeJson()
		if err != nil {
			t.Log(err)
		}

		t.Log(json)
		So(json, ShouldContainSubstring, "Nonolive-LivestreamGame&GọiVideo.com")
	})
}
